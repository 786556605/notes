<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://notes.shichao.io/apue/ch10/">
        <link rel="shortcut icon" href="../../toki_32.png">
        

	<title>Chapter 10. Signals - Shichao's Notes</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../custom.css" rel="stylesheet">
        <link href="../../github.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Shichao's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">APUE <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../ch1/">Chapter 1. UNIX System Overview</a>
                        </li>
                    
                        <li >
                            <a href="../ch2/">Chapter 2. UNIX Standardization and Implementations</a>
                        </li>
                    
                        <li >
                            <a href="../ch3/">Chapter 3. File I/O</a>
                        </li>
                    
                        <li >
                            <a href="../ch4/">Chapter 4. Files and Directories</a>
                        </li>
                    
                        <li >
                            <a href="../ch5/">Chapter 5. Standard I/O Library</a>
                        </li>
                    
                        <li >
                            <a href="../ch6/">Chapter 6. System Data Files and Information</a>
                        </li>
                    
                        <li >
                            <a href="../ch7/">Chapter 7. Process Environment</a>
                        </li>
                    
                        <li >
                            <a href="../ch8/">Chapter 8. Process Control</a>
                        </li>
                    
                        <li >
                            <a href="../ch9/">Chapter 9. Process Relationships</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Chapter 10. Signals</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UTLK <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../utlk/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../utlk/ch2/">Chapter 2. Memory Addressing</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">LKD <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../lkd/ch1/">Chapter 1. Introduction to the Linux Kernel</a>
                        </li>
                    
                        <li >
                            <a href="../../lkd/ch2/">Chapter 2. Getting Started with the Kernel</a>
                        </li>
                    
                        <li >
                            <a href="../../lkd/ch3/">Chapter 3. Process Management</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UNP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../unp/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch2/">Chapter 2. The Transport Layer: TCP, UDP, and SCTP</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch3/">Chapter 3. Sockets Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch4/">Chapter 4. Elementary TCP Sockets</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch5/">Chapter 5. TCP Client/Server Example</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">ICND <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../icnd1/part1/">ICND1 Part I: Networking Fundamentals</a>
                        </li>
                    
                        <li >
                            <a href="../../icnd2/part1/">ICND2 Part I: LAN Switching</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TCPv1 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../tcpv1/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/ch2/">Chapter 2. The Internet Address Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/ch10/">Chapter 10. User Datagram Protocol (UDP) and IP Fragmentation</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/headers/">Headers</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Others <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../htae/">HTAE</a>
                        </li>
                    
                        <li >
                            <a href="../../golang/">Go</a>
                        </li>
                    
                        <li >
                            <a href="../../bash/">Bash</a>
                        </li>
                    
                        <li >
                            <a href="../../c/">C</a>
                        </li>
                    
                        <li >
                            <a href="../../iptables/">iptables</a>
                        </li>
                    
                        <li >
                            <a href="../../nginx/">Nginx</a>
                        </li>
                    
                        <li >
                            <a href="../../vim/">Vim</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="https://github.com/shichao-an/notes">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#chapter-10-signals">Chapter 10. Signals</a></li>
        
    
        <li class="main "><a href="#introduction">Introduction</a></li>
        
            <li><a href="#posix-reliable-signals">POSIX reliable signals</a></li>
        
    
        <li class="main "><a href="#signal-concepts">Signal Concepts</a></li>
        
            <li><a href="#signal-dispositions">Signal dispositions</a></li>
        
            <li><a href="#unix-system-signals">UNIX System signals</a></li>
        
            <li><a href="#the-core-file">The core file</a></li>
        
            <li><a href="#detailed-description-of-signals">Detailed description of signals</a></li>
        
    
        <li class="main "><a href="#signal-function">signal Function</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">
              

<h3 id="chapter-10-signals"><strong>Chapter 10. Signals</strong></h3>
<h3 id="introduction">Introduction</h3>
<p>Signals are software interrupts. They provide a way of handling asynchronous events. Most nontrivial application programs need to deal with signals.</p>
<h4 id="posix-reliable-signals">POSIX reliable signals</h4>
<p>Signals have been provided since the early versions of the UNIX System, but the signal model provided with systems such as Version 7 was not reliable. Signals could get lost, and it was difficult for a process to turn off selected signals when executing critical regions of code. Both 4.3BSD and SVR3 made changes to the signal model, adding what are called <strong>reliable signals</strong>. But the changes made by Berkeley and AT&amp;T were incompatible. Fortunately, POSIX.1 standardized the reliable-signal routines, and that is what we describe here.</p>
<p>This chapter starts with an overview of signals and a description of what each signal is normally used for, then discusses problems with earlier implementations, since it is often important to understand what is wrong with an implementation before seeing how to do things correctly. This chapter contains numerous examples that are not entirely correct and a discussion of the defects.</p>
<h3 id="signal-concepts">Signal Concepts</h3>
<ul>
<li>
<p>Every signal has a name. They all begin with the three characters <code>SIG</code>. For example:</p>
<ul>
<li><code>SIGABRT</code> is the abort signal that is generated when a process calls the <code>abort</code> function.</li>
<li><code>SIGALRM</code> is the alarm signal that is generated when the timer set by the <code>alarm</code> function goes off.</li>
</ul>
<p>FreeBSD 8.0 supports 32 different signals. Mac OS X 10.6.8 and Linux 3.2.0 each support 31 different signals, whereas Solaris 10 supports 40 different signals. FreeBSD, Linux, and Solaris, support additional application-defined signals introduced to support <strong>real-time applications</strong>.</p>
</li>
<li>
<p>Signal names are all defined by positive integer constants (the signal number) in the header <code>&lt;signal.h&gt;</code>.</p>
<ul>
<li>Implementations actually define the individual signals in a different header file, but this header file is included by <code>&lt;signal.h&gt;</code>.</li>
<li>It bad for the kernel to include header files meant for user-level applications, so if the applications and the kernel both need the same definitions, the information is placed in a kernel header file that is then included by the user-level header file.<ul>
<li><code>&lt;sys/signal.h&gt;</code>: FreeBSD 8.0 and Mac OS X 10.6.8</li>
<li><code>&lt;bits/signum.h&gt;</code>: Linux 3.2.0</li>
<li><code>&lt;sys/iso/signal_iso.h&gt;</code>: Solaris 10</li>
</ul>
</li>
</ul>
</li>
<li>No signal has a signal number of 0. The <code>kill</code> function uses the signal number of 0 for a special case. POSIX.1 calls this value the null signal.</li>
<li>Numerous conditions can generate a signal:<ul>
<li>The terminal-generated signals occur when users press certain terminal keys. Pressing the DELETE key or Control-C on the terminal normally causes the interrupt signal (<code>SIGINT</code>) to be generated.</li>
<li>Hardware exceptions generate signals. For example, divide by 0 and invalid memory reference. These conditions are usually detected by the hardware, and the kernel is notified. The kernel then generates the appropriate signal for the process that was running at the time the condition occurred. For example, <code>SIGSEGV</code> is generated for a process that executes an invalid memory reference.</li>
<li>The <code>kill(2)</code> function allows a process to send any signal to another process or process group, with limitations: we have to be the owner of the process that we’re sending the signal to, or we have to be the superuser.</li>
<li>The <code>kill(1)</code> command allows us to send signals to other processes. This program is just an interface to the <code>kill</code> function. This command is often used to terminate a runaway background process.</li>
<li>Software conditions can generate signals when a process should be notified of various events. For example:<ul>
<li><code>SIGURG</code>: generated when out-of-band data arrives over a network connection),</li>
<li><code>SIGPIPE</code>: generated when a process writes to a pipe that has no reader)</li>
<li><code>SIGALRM</code>: generated when an alarm clock set by the process expires).</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Signals are classic examples of asynchronous events. They occur at random times to the process. The process can’t simply test a variable (such as <code>errno</code>) to see whether a signal has occurred; instead, the process has to tell the kernel "if and when this signal occurs, do the following".</p>
<h4 id="signal-dispositions">Signal dispositions</h4>
<p>We can tell the kernel to do one of three things when a signal occurs. This is called the <strong>disposition of the signal</strong>, or the <strong>action associated with a signal</strong>. (<a href="http://man7.org/linux/man-pages/man7/signal.7.html"><code>signal(7)</code></a>)</p>
<ol>
<li><strong>Ignore the signal</strong>. Most signals can be ignored, but two signals can never be ignored: <code>SIGKILL</code> and <code>SIGSTOP</code>.<ul>
<li>The reason these two signals can’t be ignored is to provide the kernel and the superuser with a surefire way of either killing or stopping any process.</li>
<li>If we ignore some of the signals that are generated by a hardware exception (such as illegal memory reference or divide by 0), the behavior of the process is undefined.</li>
</ul>
</li>
<li><strong>Catch the signal</strong>. To do this, we tell the kernel to call a function of ours whenever the signal occurs. In our function, we can do whatever we want to handle the condition. For example:<ul>
<li>If we’re writing a command interpreter, when the user generates the interrupt signal at the keyboard, we probably want to return to the main loop of the program, terminating whatever command we were executing for the user.</li>
<li>If the <code>SIGCHLD</code> signal is caught, it means that a child process has terminated, so the signal-catching function can call <code>waitpid</code> to fetch the child’s process ID and termination status.</li>
<li>If the process has created temporary files, we may want to write a signal-catching function for the SIGTERM signal (the termination signal that is the default signal sent by the kill command) to clean up the temporary files.</li>
<li>Note that the two signals <code>SIGKILL</code> and <code>SIGSTOP</code> can’t be caught.</li>
</ul>
</li>
<li><strong>Let the default action apply</strong>. Every signal has a default action. The default action for most signals is to terminate the process.</li>
</ol>
<p>The signals <code>SIGKILL</code> and <code>SIGSTOP</code> cannot be caught, blocked, or ignored. (<a href="http://man7.org/linux/man-pages/man7/signal.7.html"><code>signal(7)</code></a>)</p>
<h4 id="unix-system-signals">UNIX System signals</h4>
<p>The following table lists the names of all the signals, an indication of which systems support the signal, and the default action for the signal. The SUS column contains "x" if the signal is defined as part of the base POSIX.1 specification and XSI if it is defined as part of the XSI option. The supported systems are FreeBSD 8.0, Linux 3.2.0, Mac OS X 10.6.8 and Solaris 10.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>ISO C</th>
<th>SUS</th>
<th>FreeBSD</th>
<th>Linux</th>
<th>Mac OS X</th>
<th>Solaris</th>
<th>Default action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SIGABRT</code></td>
<td>abnormal termination (<code>abort</code>)</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGALRM</code></td>
<td>timer expired (<code>alarm</code>)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGBUS</code></td>
<td>hardware fault</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGCANCEL</code></td>
<td>threads library internal use</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGCHLD</code></td>
<td>change in status of child</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGCONT</code></td>
<td>continue stopped process</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>continue/ignore</td>
</tr>
<tr>
<td><code>SIGEMT</code></td>
<td>hardware fault</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGFPE</code></td>
<td>arithmetic exception</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGFREEZE</code></td>
<td>checkpoint freeze</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGHUP</code></td>
<td>hangup</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGILL</code></td>
<td>illegal instruction</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGINFO</code></td>
<td>status request from keyboard</td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
<td></td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGINT</code></td>
<td>terminal interrupt character</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGIO</code></td>
<td>asynchronous I/O</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate/ignore</td>
</tr>
<tr>
<td><code>SIGIOT</code></td>
<td>hardware fault</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGJVM1</code></td>
<td>Java virtual machine internal use</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGJVM2</code></td>
<td>Java virtual machine internal use</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGKILL</code></td>
<td>termination</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGLOST</code></td>
<td>resource lost</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGLWP</code></td>
<td>threads library internal use</td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGPIPE</code></td>
<td>write to pipe with no readers</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGPOLL</code></td>
<td>pollable event (<code>poll</code>)</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGPROF</code></td>
<td>profiling time alarm (<code>setitimer</code>)</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGPWR</code></td>
<td>power fail/restart</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
<td>terminate/ignore</td>
</tr>
<tr>
<td><code>SIGQUIT</code></td>
<td>terminal quit character</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGSEGV</code></td>
<td>invalid memory reference</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGSTKFLT</code></td>
<td>coprocessor stack fault</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGSTOP</code></td>
<td>stop</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>stop process</td>
</tr>
<tr>
<td><code>SIGSYS</code></td>
<td>invalid system call</td>
<td></td>
<td>XSI</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGTERM</code></td>
<td>termination</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGTHAW</code></td>
<td>checkpoint thaw</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGTHR</code></td>
<td>threads library internal use</td>
<td></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGTRAP</code></td>
<td>hardware fault</td>
<td></td>
<td>XSI</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core</td>
</tr>
<tr>
<td><code>SIGTSTP</code></td>
<td>terminal stop character</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>stop process</td>
</tr>
<tr>
<td><code>SIGTTIN</code></td>
<td>background read from control tty</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>stop process</td>
</tr>
<tr>
<td><code>SIGTTOU</code></td>
<td>background write to control tty</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>stop process</td>
</tr>
<tr>
<td><code>SIGURG</code></td>
<td>urgent condition (sockets)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGUSR1</code></td>
<td>user-defined signal</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGUSR2</code></td>
<td>user-defined signal</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGVTALRM</code></td>
<td>virtual time alarm (<code>setitimer</code>)</td>
<td></td>
<td>XSI</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate</td>
</tr>
<tr>
<td><code>SIGWAITING</code></td>
<td>threads library internal use</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGWINCH</code></td>
<td>terminal window size change</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>ignore</td>
</tr>
<tr>
<td><code>SIGXCPU</code></td>
<td>CPU limit exceeded (<code>setrlimit</code>)</td>
<td></td>
<td>XSI</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core/ignore</td>
</tr>
<tr>
<td><code>SIGXFSZ</code></td>
<td>file size limit exceeded (<code>setrlimit</code>)</td>
<td></td>
<td>XSI</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>terminate+core/ignore</td>
</tr>
<tr>
<td><code>SIGXRES</code></td>
<td>resource control exceeded</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>x</td>
<td>ignore</td>
</tr>
</tbody>
</table>
<h4 id="the-core-file">The core file</h4>
<p>When the default action (in the table above) is labeled "terminate+core", it means that a memory image of the process is left in the file named <code>core</code> of the current working directory of the process. This file can be used with most UNIX System debuggers to examine the state of the process at the time it terminated.</p>
<p>The name of the <code>core</code> file varies among implementations.  On Mac OS X 10.6.8, the core file is named core.<em>pid</em>, where <em>pid</em> is the ID of the process that received the signal. On Linux 3.2.0, the name is configured through <code>/proc/sys/kernel/core_pattern</code>. (<a href="http://man7.org/linux/man-pages/man5/core.5.html"><code>core(5)</code></a>) [p315]</p>
<p>Most implementations leave the core file in the current working directory of the corresponding process; Mac OS X places all core files in <code>/cores</code> instead.</p>
<p>The core file will not be generated if:</p>
<ul>
<li>the process was set-user-ID and the current user is not the owner of the program file,</li>
<li>the process was set-group-ID and the current user is not the group owner of the file,</li>
<li>the user does not have permission to write in the current working directory,</li>
<li>the file already exists and the user does not have permission to write to it,</li>
<li>the file is too big (see <code>RLIMIT_CORE</code> limit in <a href="../../apue/ch7/#getrlimit-and-setrlimit-functions">Section 7.11</a>)</li>
</ul>
<p>The permissions of the core file (assuming that the file doesn’t already exist) are usually user-read and user-write, although Mac OS X sets only user-read.</p>
<p>In the table, the signals with a description of "hardware fault" correspond to implementation-defined hardware faults.</p>
<h4 id="detailed-description-of-signals">Detailed description of signals</h4>
<ul>
<li><code>SIGABRT</code>: generated by calling the <code>abort</code> function.  The process terminates abnormally.</li>
<li><code>SIGALRM</code>:<ul>
<li>This signal is generated when a timer set with the <code>alarm</code> function expires.</li>
<li>This signal is also generated when an interval timer set by the <code>setitimer(2)</code> function expires.</li>
</ul>
</li>
<li><code>SIGBUS</code>: indicates an implementation-defined hardware fault.  Implementations usually generate this signal on certain types of memory faults.</li>
<li><span class="text-muted"><code>SIGCANCEL</code>: used internally by the Solaris threads library. It is not meant for general use.</span></li>
<li><code>SIGCHLD</code>: Whenever a process terminates or stops, the <code>SIGCHLD</code> signal is sent to the parent. By default, this signal is ignored, so the parent must catch this signal if it wants to be notified whenever a child’s status changes. The normal action in the signal-catching function is to call one of the <code>wait</code> functions to fetch the child’s process ID and termination status. [p317]</li>
<li><code>SIGCONT</code>: this job-control signal is sent to a stopped process when it is continued. The default action is to continue a stopped process, but to ignore the signal if the process wasn’t stopped.</li>
<li><code>SIGEMT</code>: indicates an implementation-defined hardware fault. Not all platforms support this signal. [p318]</li>
<li><code>SIGFPE</code>: signals an arithmetic exception, such as divide by 0, floating-point overflow, and so on. The name is derived from "floating-point exception" (<a href="http://www.gnu.org/software/libc/manual/html_node/Program-Error-Signals.html">Program Error Signals</a>).</li>
<li><span class="text-muted"><code>SIGFREEZE</code>: defined only by Solaris. </span> [p318]</li>
<li><code>SIGHUP</code>: this signal is sent to the controlling process (session leader) associated with a controlling terminal if a disconnect is detected by the terminal interface.<ul>
<li>This signal is generated for this condition only if the terminal’s <code>CLOCAL</code> flag is not set. The <code>CLOCAL</code> flag for a terminal is set if the attached terminal is local. The flag tells the terminal driver to ignore all modem status lines.</li>
<li>The session leader that receives this signal may be in the background (<a href="../figure_9.7.png">Figure 9.7</a>). This differs from the normal terminal-generated signals (interrupt, quit, and suspend), which are always delivered to the foreground process group.</li>
<li>This signal is also generated if the session leader terminates. In this case, the signal is sent to each process in the foreground process group.</li>
<li>This signal is commonly used to notify daemon processes (<a href="../../apue/ch13/">Chapter 13</a>) to reread their configuration files. The reason <code>SIGHUP</code> is chosen for this task is that a daemon should not have a controlling terminal and would normally never receive this signal.</li>
</ul>
</li>
<li><code>SIGILL</code>: indicates that the process has executed an illegal hardware instruction.<ul>
<li>4.3BSD generated this signal from the abort function. <code>SIGABRT</code> is now used for this purpose.</li>
</ul>
</li>
<li><code>SIGINFO</code>: This BSD signal is generated by the terminal driver when we type the status key (often Control-T). This signal is sent to all processes in the foreground process group (Figure 9.9). This signal normally causes status information on processes in the foreground process group to be displayed on the terminal. Linux doesn’t provide support for <code>SIGINFO</code>.</li>
<li><code>SIGINT</code>: generated by the terminal driver when we press the interrupt key (often DELETE or Control-C). This signal is sent to all processes in the foreground process group (<a href="../figure_9.9.png">Figure 9.9</a>). This signal is often used to terminate a runaway program, especially when it’s generating a lot of unwanted output on the screen.</li>
<li><code>SIGIO</code>: indicates an asynchronous I/O event.</li>
<li><code>SIGIOT</code>: indicates an implementation-defined hardware fault. <code>SIGABRT</code> is now used for this purpose. On FreeBSD 8.0, Linux 3.2.0, Mac OS X 10.6.8, and Solaris 10, <code>SIGIOT</code> is defined to be the same value as <code>SIGABRT</code>.</li>
<li><span class="text-muted"><code>SIGJVM1</code> and <code>SIGJVM2</code>: reserved for use by the Java virtual machine on Solaris.</span></li>
<li><code>SIGKILL</code>: one of the two that can’t be caught or ignored. It provides the system administrator with a sure way to kill any process.</li>
<li><span class="text-muted"><code>SIGLOST</code>: used to notify a process running on a Solaris NFSv4 client system that a lock could not be reacquired during recovery.</span></li>
<li><code>SIGPIPE</code>: If we write to a pipeline but the reader has terminated, <code>SIGPIPE</code> is generated. This signal is also generated when a process writes to a socket of type <code>SOCK_STREAM</code> that is no longer connected.</li>
<li><span class="text-muted"><code>SIGPOLL</code>: This signal is marked obsolescent in SUSv4, so it might be removed in a future version of the standard. It can be generated when a specific event occurs on a pollable device.</span></li>
<li><span class="text-muted"><code>SIGPROF</code>: This signal is marked obsolescent in SUSv4, so it might be removed in a future version of the standard. This signal is generated when a profiling interval timer set by the <code>setitimer(2)</code> function expires.</span></li>
<li><code>SIGPWR</code>: system dependent, mainly used on a system that has an uninterruptible power supply (UPS).<ul>
<li>If power fails, the UPS takes over and the software can usually be notified. Nothing needs to be done at this point, as the system continues running on battery power. But if the battery gets low, the software is usually notified again; at this point, it behooves the system to shut everything down. The process that is notified of the low-battery condition sends the <code>SIGPWR</code> signal to the <code>init</code> process, and <code>init</code> handles the system shutdown.</li>
<li>Solaris 10 and some Linux distributions have entries in the <code>inittab</code> file for this purpose: <code>powerfail</code> and <code>powerwait</code> (or <code>powerokwait</code>).</li>
<li>The default action for <code>SIGPWR</code> as either "terminate" or "ignore", which depends on the system. The default on Linux is to terminate the process. On Solaris, the signal is ignored by default.</li>
</ul>
</li>
<li><code>SIGQUIT</code>: generated by the terminal driver when we press the terminal quit key (often Control-backslash). This signal is sent to all processes in the foreground process group (<a href="../figure_9.9.png">Figure 9.9</a>). This signal not only terminates the foreground process group (as does <code>SIGINT</code>), but also generates a <code>core</code> file.</li>
<li><code>SIGSEGV</code>: indicates that the process has made an invalid memory reference (which is usually a sign that the program has a bug, such as dereferencing an uninitialized pointer). The name SEGV stands for "segmentation violation".</li>
<li><code>SIGSTKFLT</code>: This signal is defined only by Linux. It showed up in the earliest versions of Linux, where it was intended to be used for stack faults taken by the math coprocessor. This signal is not generated by the kernel, but remains for backward compatibility.</li>
<li><code>SIGSTOP</code>: This job-control signal stops a process. It is similar to the interactive stop signal (<code>SIGTSTP</code>), but <code>SIGSTOP</code> cannot be caught or ignored.</li>
<li><code>SIGSYS</code>: indicates an invalid system call. The process executed a machine instruction that the kernel thought was a system call, but the parameter with the instruction that indicates the type of system call was invalid. For example, if you build a program that uses a new system call and you then try to run the same binary on an older version of the operating system where the system call doesn’t exist. [p320]</li>
<li><code>SIGTERM</code>: the termination signal sent by the <code>kill(1)</code> command by default. Because it can be caught by applications, using <code>SIGTERM</code> gives programs a chance to terminate gracefully by cleaning up before exiting (in contrast to <code>SIGKILL</code>, which can’t be caught or ignored).</li>
<li><span class="text-muted"><code>SIGTHAW</code>: defined only by Solaris and used to notify processes that need to take special action when the system resumes operation after being suspended.</span></li>
<li><span class="text-muted"><code>SIGTHR</code>: reserved for use by the thread library on FreeBSD. It is defined to have the same value as <code>SIGLWP</code>.</span></li>
<li><code>SIGTRAP</code>: indicates an implementation-defined hardware fault. The signal name comes from the PDP-11 TRAP instruction. Implementations often use this signal to transfer control to a debugger when a breakpoint instruction is executed.</li>
<li><code>SIGTSTP</code>: This interactive stop signal is generated by the terminal driver when we press the terminal suspend key (often Control-Z). This signal is sent to all processes in the foreground process group (<a href="../figure_9.9.png">Figure 9.9</a>). [p321]</li>
<li><code>SIGTTIN</code>: generated by the terminal driver when a process in a background process group tries to read from its controlling terminal. If either of the following case occurs, the signal is not generated; instead, the read operation fails with errno set to <code>EIO</code>:<ul>
<li>The reading process is ignoring or blocking this signal.</li>
<li>The process group of the reading process is orphaned.</li>
</ul>
</li>
<li>
<p><code>SIGTTOU</code>: generated by the terminal driver when a process in a background process group tries to write to its controlling terminal. Unlike the case with background reads, a process can choose to allow background writes to the controlling terminal. If background writes are not allowed, then like the <code>SIGTTIN</code> signal, the signal is not generated if either of the following cases occurs; instead, the read operation fails with errno set to <code>EIO</code>:</p>
<ul>
<li>The writing process is ignoring or blocking this signal</li>
<li>The process group of the writing process is orphaned</li>
</ul>
<p>Regardless of whether background writes are allowed, certain terminal operations (other than writing), including <code>tcsetattr</code>, <code>tcsendbreak</code>, <code>tcdrain</code>, <code>tcflush</code>, <code>tcflow</code>, and <code>tcsetpgrp</code> can also generate the <code>SIGTTOU</code> signal.</p>
</li>
<li>
<p><code>SIGURG</code>: notifies the process that an urgent condition has occurred. It is optionally generated when <a href="https://en.wikipedia.org/wiki/Out-of-band_data">out-of-band data</a> is received on a network connection.</p>
</li>
<li><code>SIGUSR1</code> and <code>SIGUSR2</code>: user-defined signals, for use in application programs.</li>
<li><code>SIGVTALRM</code>: generated when a virtual interval timer set by the <code>setitimer(2)</code> function expires.</li>
<li><span class="text-muted"><code>SIGWAITING</code>: used internally by the Solaris threads library, and is not available for general use.</span></li>
<li><code>SIGWINCH</code>: The kernel maintains the size of the window associated with each terminal and pseudo terminal. A process can get and set the window size with the <code>ioctl</code> function. If a process changes the window size from its previous value using the <code>ioctl</code> set-window-size command, the kernel generates the <code>SIGWINCH</code> signal for the foreground process group.</li>
<li><code>SIGXCPU</code>: generated if the process exceeds its soft CPU time limit. The default action depends on the operating system. The Single UNIX Specification requires that the default action be to terminate the process abnormally.<ul>
<li>Linux 3.2.0 and Solaris 10 support a default action of terminate with a core file</li>
<li>FreeBSD 8.0 and Mac OS X 10.6.8 support a default action of terminate without generating a core file.</li>
</ul>
</li>
<li><code>SIGXFSZ</code>:  generated if the process exceeds its soft file size limit. The default action depends on the operating system, similar to <code>SIGXCPU</code>.</li>
<li><span class="text-muted"><code>SIGXRES</code>: defined only by Solaris.</span></li>
</ul>
<h3 id="signal-function"><code>signal</code> Function</h3>
<p>The simplest interface to the signal features of the UNIX System is the signal function</p>
<ul>
<li><a href="https://gist.github.com/shichao-an/73f4115f93c26a852349">apue_signal.h</a></li>
</ul>
<script src="https://gist.github.com/shichao-an/73f4115f93c26a852349.js"></script>

<p>Implementations derived from UNIX System V support the <code>signal</code> function, which provides the old unreliable-signal semantics. New applications should not use these unreliable signals. 4.4BSD also provides the <code>signal</code> function, but it is defined in terms of the <code>sigaction</code> function, so using it under 4.4BSD provides the newer reliable-signal semantics. Most current systems follow this strategy except Solaris. [p323]</p>
<p>Because the semantics of signal differ among implementations, we must use the <code>sigaction</code> function instead. We provide an implementation of <code>signal</code> that uses <code>sigaction</code> (later this chapter).</p>
            </div>
        </div>

        <footer class="col-md-12">
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../custom.js"></script>
    </body>
</html>