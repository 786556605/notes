<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://notes.shichao.io/apue/ch6/">
        <link rel="shortcut icon" href="../../toki_32.png">
        

	<title>Chapter 6. System Data Files and Information - Shichao's Notes</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../custom.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Shichao's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">APUE <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../ch1/">Chapter 1. UNIX System Overview</a>
                        </li>
                    
                        <li >
                            <a href="../ch2/">Chapter 2. UNIX Standardization and Implementations</a>
                        </li>
                    
                        <li >
                            <a href="../ch3/">Chapter 3. File I/O</a>
                        </li>
                    
                        <li >
                            <a href="../ch4/">Chapter 4. Files and Directories</a>
                        </li>
                    
                        <li >
                            <a href="../ch5/">Chapter 5. Standard I/O Library</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Chapter 6. System Data Files and Information</a>
                        </li>
                    
                        <li >
                            <a href="../ch7/">Chapter 7. Process Environment</a>
                        </li>
                    
                        <li >
                            <a href="../ch8/">Chapter 8. Process Control</a>
                        </li>
                    
                        <li >
                            <a href="../ch9/">Chapter 9. Process Relationships</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UTLK <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../utlk/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../utlk/ch2/">Chapter 2. Memory Addressing</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">LKD <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../lkd/ch1/">Chapter 1. Introduction to the Linux Kernel</a>
                        </li>
                    
                        <li >
                            <a href="../../lkd/ch2/">Chapter 2. Getting Started with the Kernel</a>
                        </li>
                    
                        <li >
                            <a href="../../lkd/ch3/">Chapter 3. Process Management</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UNP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../unp/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch2/">Chapter 2. The Transport Layer: TCP, UDP, and SCTP</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch3/">Chapter 3. Sockets Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch4/">Chapter 4. Elementary TCP Sockets</a>
                        </li>
                    
                        <li >
                            <a href="../../unp/ch5/">Chapter 5. TCP Client/Server Example</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">ICND <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../icnd1/part1/">ICND1 Part I: Networking Fundamentals</a>
                        </li>
                    
                        <li >
                            <a href="../../icnd2/part1/">ICND2 Part I: LAN Switching</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TCPv1 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../tcpv1/ch1/">Chapter 1. Introduction</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/ch2/">Chapter 2. The Internet Address Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/ch10/">Chapter 10. User Datagram Protocol (UDP) and IP Fragmentation</a>
                        </li>
                    
                        <li >
                            <a href="../../tcpv1/headers/">Headers</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Others <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../htae/">HTAE</a>
                        </li>
                    
                        <li >
                            <a href="../../golang/">Go</a>
                        </li>
                    
                        <li >
                            <a href="../../bash/">Bash</a>
                        </li>
                    
                        <li >
                            <a href="../../c/">C</a>
                        </li>
                    
                        <li >
                            <a href="../../iptables/">iptables</a>
                        </li>
                    
                        <li >
                            <a href="../../nginx/">Nginx</a>
                        </li>
                    
                        <li >
                            <a href="../../vim/">Vim</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="https://github.com/shichao-an/notes">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#chapter-6-system-data-files-and-information">Chapter 6. System Data Files and Information</a></li>
        
    
        <li class="main "><a href="#password-file">Password File</a></li>
        
    
        <li class="main "><a href="#shadow-passwords">Shadow Passwords</a></li>
        
    
        <li class="main "><a href="#group-file">Group File</a></li>
        
    
        <li class="main "><a href="#supplementary-group-ids">Supplementary Group IDs</a></li>
        
    
        <li class="main "><a href="#implementation-differences">Implementation Differences</a></li>
        
    
        <li class="main "><a href="#other-data-files">Other Data Files</a></li>
        
    
        <li class="main "><a href="#login-accounting">Login Accounting</a></li>
        
    
        <li class="main "><a href="#system-identification">System Identification</a></li>
        
    
        <li class="main "><a href="#time-and-date-routines">Time and Date Routines</a></li>
        
            <li><a href="#conversion-specifiers-for-strftime">Conversion specifiers for strftime</a></li>
        
            <li><a href="#conversion-specifiers-for-strptime">Conversion specifiers for strptime</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h3 id="chapter-6-system-data-files-and-information"><strong>Chapter 6. System Data Files and Information</strong></h3>
<p>This chapter covers portable interfaces to data files, system identification functions and the time and date functions.</p>
<h3 id="password-file">Password File</h3>
<p>The UNIX System's password file, called the user database by POSIX.1, contains the following fields:</p>
<p><a href="../figure_6.1.png" title="Figure 6.1 Fields in /etc/passwd file"><img alt="Figure 6.1 Fields in /etc/passwd file" src="../figure_6.1_600.png" /></a></p>
<p>Historically, the password file has been stored in <code>/etc/passwd</code> and has been an ASCII file.</p>
<ul>
<li><code>root</code> has a user ID of 0 (superuser)</li>
<li>The encrypted password field contains a single character as a placeholder (<code>x</code>) </li>
<li>Some fields can be empty</li>
<li>The shell field contains the user's login shell. The default value for an empty shell field is usually <code>/bin/sh</code>. Other executable that prevents a user from loggin in to a system:<ul>
<li><code>/dev/null</code></li>
<li><code>/bin/false</code>: exits with an unsuccessful (nonzero) status</li>
<li><code>/bin/true</code>: exits with a successful (zero) status</li>
<li><code>nologin</code>: prints a customizable error message and exits with a nonzero exit status</li>
</ul>
</li>
<li><code>nobody</code> user name can be used to allow people to log in to a system, but with a user ID (65534) and group ID (65534) that provide no privileges.</li>
<li>Some systems that provide the <code>finger(1)</code> command support additional information in the comment field</li>
</ul>
<p>Some systems provide the <code>vipw</code> command to allow administrators to edit the password file.</p>
<script src="https://gist.github.com/shichao-an/00b608f959de8dad0b1b.js"></script>

<ul>
<li><code>getpwuid</code>: used by the <code>ls(1)</code> program to map the numerical user ID contained in an i-node into a user's login name.</li>
<li><code>getpwnam</code>: used by the <code>login(1)</code> program when we enter our login name</li>
</ul>
<p>Both functions return a pointer to a passwd structure that the functions fill in. <u>This structure is usually a static variable within the function, so its contents are overwritten each time we call either of these functions.</u></p>
<script src="https://gist.github.com/shichao-an/ffbbc20702760d6a4fab.js"></script>

<ul>
<li><code>getpwent</code>: returns the next entry (a pointer to a structure that it has filled in, this structure is overwritten each time we call this function) in the password file.</li>
<li><code>setpwent</code>: rewinds files</li>
<li><code>endpwent</code>: closes files</li>
</ul>
<p>Example:</p>
<ul>
<li><a href="https://github.com/shichao-an/apue.3e/blob/master/datafiles/getpwnam.c">getpwnam.c</a></li>
</ul>
<p><code>setpwent</code> at the beginning of this function is self-defense: we ensure that the files are rewound, in case the caller has already opened them by calling getpwent.</p>
<h3 id="shadow-passwords">Shadow Passwords</h3>
<p>Systems store the encrypted password in another file, often called the <strong>shadow password file</strong>. Minimally, this file has to contain the user name and the encrypted password.</p>
<p><a href="../figure_6.3.png" title="Figure 6.3 Fields in /etc/shadow file"><img alt="Figure 6.3 Fields in /etc/shadow file" src="../figure_6.3_600.png" /></a></p>
<p>The shadow password file should not be readable by the world. Only a few programs need to access encrypted passwords, e.g. <code>login(1)</code> and <code>passwd(1)</code>, and these programs are often set-user-ID root. With shadow passwords, the regular password file, <code>/etc/passwd</code>, can be left readable by the world.</p>
<script src="https://gist.github.com/shichao-an/bad119e8e6ed442e25bf.js"></script>

<h3 id="group-file">Group File</h3>
<p>The UNIX System’s group file, called the group database by POSIX.1, contains the following fields:</p>
<p><a href="../figure_6.4.png" title="Figure 6.4 Fields in /etc/group file"><img alt="Figure 6.4 Fields in /etc/group file" src="../figure_6.4_600.png" /></a></p>
<p>The field <code>gr_mem</code> is an array of pointers to the user names that belong to this group. This array is terminated by a null pointer.</p>
<script src="https://gist.github.com/shichao-an/c280f5fa5d15b006e8af.js"></script>

<p>Like the password file functions, both of these functions normally return pointers to a static variable, which is overwritten on each call.</p>
<script src="https://gist.github.com/shichao-an/98d14c0850ac1f357993.js"></script>

<ul>
<li><code>getgrent</code>: reads the next entry from the group file, opening the file first, if it’s not already open</li>
</ul>
<h3 id="supplementary-group-ids">Supplementary Group IDs</h3>
<p><code>newgrp(1)</code> can be used to change the real group ID to the new group’s ID. We could always go back to our original group (as listed in <code>/etc/passwd</code>) by executing <code>newgrp</code> without any arguments.</p>
<p>With 4.2BSD, the concept of <strong>supplementary group IDs</strong> was introduced. The file access permission checks were modified so that in addition to comparing the the file’s group ID to the process effective group ID, it was also compared to all the supplementary group IDs.</p>
<p>The constant <code>NGROUPS_MAX</code> specifies the number of supplementary group IDs.</p>
<script src="https://gist.github.com/shichao-an/72cd85f9279a4501249c.js"></script>

<ul>
<li><code>getgroups</code><ul>
<li><em>gidsetsize</em> &gt; 0: the function fills in the array up to <em>gidsetsize</em> supplementary group IDs</li>
<li><em>gidsetsize</em> = 0: the function returns only the number of supplementary group IDs; <code>grouplist</code> is not modified</li>
</ul>
</li>
<li><code>setgroups</code>: called by the superuser to set the supplementary group ID list for the calling process</li>
<li><code>initgroups</code>: reads the entire group file with the functions <code>getgrent</code>, <code>setgrent</code>, and <code>endgrent</code> and determines the group membership for username.  It then calls setgroups to initialize the supplementary group ID list for the user. It includes <em>basegid</em> in the supplementary group ID list; basegid is the group ID from the password file for username. See <a href="http://www.gnu.org/software/libc/manual/html_node/Setting-Groups.html">Setting the Group IDs</a></li>
</ul>
<h3 id="implementation-differences">Implementation Differences</h3>
<p>[p184-185]</p>
<h3 id="other-data-files">Other Data Files</h3>
<p>Numerous other files are used by UNIX systems in normal day-to-day operation.</p>
<p>Services and networks:</p>
<ul>
<li><code>/etc/services</code></li>
<li><code>/etc/protocols</code></li>
<li><code>/etc/networks</code></li>
</ul>
<p>The general principle is that every data file has at least three functions:</p>
<ul>
<li><code>get</code>: reads the next record, opening the file</li>
<li><code>set</code>: opens the file, if not already open, and rewinds the file</li>
<li><code>end</code>: closes the data file</li>
</ul>
<table>
<thead>
<tr>
<th>Description</th>
<th>Data file</th>
<th>Header</th>
<th>Structure</th>
<th>Additional keyed lookup functions</th>
</tr>
</thead>
<tbody>
<tr>
<td>passwords</td>
<td><code>/etc/passwd</code></td>
<td><code>&lt;pwd.h&gt;</code></td>
<td><code>passwd</code></td>
<td><code>getpwnam</code>, <code>getpwuid</code></td>
</tr>
<tr>
<td>groups</td>
<td><code>/etc/group</code></td>
<td><code>&lt;grp.h&gt;</code></td>
<td><code>group</code></td>
<td><code>getgrnam</code>, <code>getgrgid</code></td>
</tr>
<tr>
<td>shadow</td>
<td><code>/etc/shadow</code></td>
<td><code>&lt;shadow.h&gt;</code></td>
<td><code>spwd</code></td>
<td><code>getspnam</code></td>
</tr>
<tr>
<td>hosts</td>
<td><code>/etc/hosts</code></td>
<td><code>&lt;netdb.h&gt;</code></td>
<td><code>hostent</code></td>
<td><code>getnameinfo</code>, <code>getaddrinfo</code></td>
</tr>
<tr>
<td>networks</td>
<td><code>/etc/networks</code></td>
<td><code>&lt;netdb.h&gt;</code></td>
<td><code>netent</code></td>
<td><code>getnetbyname</code>, <code>getnetbyaddr</code></td>
</tr>
<tr>
<td>protocols</td>
<td><code>/etc/protocols</code></td>
<td><code>&lt;netdb.h&gt;</code></td>
<td><code>protoent</code></td>
<td><code>getprotobyname</code>, <code>getprotobynumber</code></td>
</tr>
<tr>
<td>services</td>
<td><code>/etc/services</code></td>
<td><code>&lt;netdb.h&gt;</code></td>
<td><code>servent</code></td>
<td><code>getservbyname</code>, <code>getservbyport</code></td>
</tr>
</tbody>
</table>
<h3 id="login-accounting">Login Accounting</h3>
<p>Two data files provided with most UNIX systems:</p>
<ul>
<li><code>utmp</code>: keeps track of all the users currently logged in</li>
<li><code>wtmp</code>: keeps track of all logins and logouts</li>
</ul>
<pre><code class="c">struct utmp {
    char ut_line[8]; /* tty line: &quot;ttyh0&quot;, &quot;ttyd0&quot;, &quot;ttyp0&quot;, ... */
    char ut_name[8]; /* login name */
    long ut_time; /* seconds since Epoch */
};
</code></pre>

<p>On login, the <code>login</code> program fills one of these structures, and writes it to the <code>utmp</code> and <code>wtmp</code> file. On logout, the <code>init</code> process erases this entry (fills with null bytes) in <code>utmp</code> file and appends a new logout entry. This logout entry in the <code>wtmp</code> file had the <code>ut_name</code> field zeroed out. Special entries were appended to the <code>wtmp</code> file to indicate when the system was rebooted and right before and after the system’s time and date was changed.</p>
<p>The <code>who(1)</code> program read the <code>utmp</code> file and printed its contents in a readable form</p>
<h3 id="system-identification">System Identification</h3>
<script src="https://gist.github.com/shichao-an/7477d4a7e401fc628fe9.js"></script>

<pre><code class="c">struct utsname {
    char sysname[]; /* name of the operating system */
    char nodename[]; /* name of this node */
    char release[]; /* current release of operating system */
    char version[]; /* current version of this release */
    char machine[]; /* name of hardware type */
};
</code></pre>

<script src="https://gist.github.com/shichao-an/bd385512d7844d84cf2b.js"></script>

<p><code>gethostname</code> (now defined as part of POSIX.1) specifies that the maximum host name length is <code>HOST_NAME_MAX</code>.</p>
<table>
<thead>
<tr>
<th>Interface</th>
<th>FreeBSD 8.0</th>
<th>Linux 3.2.0</th>
<th>Mac OS X 10.6.8</th>
<th>Solaris 10</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>uname</code></td>
<td>256</td>
<td>65</td>
<td>256</td>
<td>257</td>
</tr>
<tr>
<td><code>gethostname</code></td>
<td>256</td>
<td>64</td>
<td>256</td>
<td>256</td>
</tr>
</tbody>
</table>
<p>If the host is connected to a TCP/IP network, the <u>host name is normally the fully qualified domain name of the host.</u></p>
<p>There is also a <code>hostname(1)</code> command that can fetch or set the host name. (The host name is set by the superuser using a similar function, <code>sethostname</code>.) The host name is normally set at bootstrap time from one of the start-up files invoked by <code>/etc/rc</code> or <code>init</code>.</p>
<h3 id="time-and-date-routines">Time and Date Routines</h3>
<p><strong>Calendar times</strong>: number of seconds (represented in a <code>time_t</code> data type) that have passed since the <a href="http://en.wikipedia.org/wiki/Unix_time">Epoch</a>: 00:00:00 January 1, 1970, Coordinated Universal Time (UTC). These calendar times represent both the time and the date. The UNIX System has always differed from other operating systems in:</p>
<ul>
<li>keeping time in UTC instead of the local time</li>
<li>automatically handling conversions, such as daylight saving time</li>
<li>keeping the time and date as a single quantity</li>
</ul>
<p>The <code>time</code> function returns the current time and date.</p>
<script src="https://gist.github.com/shichao-an/2b5d80841cbdf01791cd.js"></script>

<p>The time value is always returned as the value of the function. If the argument is non-null, the time value is also stored at the location pointed to by <em>calptr</em>.</p>
<p>The real-time extensions to POSIX.1 added support for multiple system clocks. A clock is identified by the <code>clockid_t</code> type. </p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CLOCK_REALTIME</code></td>
<td></td>
<td>real system time</td>
</tr>
<tr>
<td><code>CLOCK_MONOTONIC</code></td>
<td><code>_POSIX_MONOTONIC_CLOCK</code></td>
<td>real system time with no negative jumps</td>
</tr>
<tr>
<td><code>CLOCK_PROCESS_CPUTIME_ID</code></td>
<td><code>_POSIX_CPUTIME</code></td>
<td>CPU time for calling process</td>
</tr>
<tr>
<td><code>CLOCK_THREAD_CPUTIME_ID</code></td>
<td><code>_POSIX_THREAD_CPUTIME</code></td>
<td>CPU time for calling thread</td>
</tr>
</tbody>
</table>
<script src="https://gist.github.com/shichao-an/83e13fecc886c9653976.js"></script>

<ul>
<li><code>clock_gettime</code>: gets the time of the specified clock. The time is returned in a <a href="../../apue/ch4/#timespec-structure"><code>timespec</code></a> structure</li>
<li><code>clock_getres</code>: determines the resolution of a given system clock. It initializes the <code>timespec</code> structure pointed to by the <em>tsp</em></li>
<li><code>clock_settime</code>: sets the time for a particular clock.</li>
<li><code>gettimeofday</code>: now obsolescent. The only legal value for <em>tzp</em> is <code>NULL</code>.</li>
</ul>
<p>Once we have the integer value that counts the number of seconds since the Epoch, we normally call a function to convert it to a broken-down time structure, and then call another function to generate a human-readable time and date.</p>
<p><a href="../figure_6.9.png" title="Figure 6.9 Relationship of the various time functions"><img alt="Figure 6.9 Relationship of the various time functions" src="../figure_6.9_600.png" /></a></p>
<p>The two functions <code>localtime</code> and <code>gmtime</code> convert a calendar time into a broken-down time, a <code>tm</code> structure.</p>
<pre><code class="c">struct tm { /* a broken-down time */
    int tm_sec; /* seconds after the minute: [0 - 60] */
    int tm_min; /* minutes after the hour: [0 - 59] */
    int tm_hour; /* hours after midnight: [0 - 23] */
    int tm_mday; /* day of the month: [1 - 31] */
    int tm_mon; /* months since January: [0 - 11] */
    int tm_year; /* years since 1900 */
    int tm_wday; /* days since Sunday: [0 - 6] */
    int tm_yday; /* days since January 1: [0 - 365] */
    int tm_isdst; /* daylight saving time flag: &lt;0, 0, &gt;0 */
};
</code></pre>

<p>The reason that the seconds can be greater than 59 is to allow for a <a href="http://en.wikipedia.org/wiki/Leap_second">leap second</a>.</p>
<script src="https://gist.github.com/shichao-an/6be4fa71d74422d28709.js"></script>

<ul>
<li><code>gmtime</code>: converts the calendar time to UTC time (broken time)</li>
<li><code>localtime</code>: converts the calendar time to local time (broken time)</li>
<li><code>mktime</code>: takes a broken-down time, expressed as a local time, and converts it into a <code>time_t</code> value</li>
<li>The <code>strftime</code> and <code>strftime_l</code> functions are the same, except that the <code>strftime_l</code> function allows the caller to specify the locale as an argument. The strftime function uses the locale specified by the <code>TZ</code> environment variable<ul>
<li><em>tmptr</em> argument is the time value to format, specified by a pointer to a broken-down time value. [p192]</li>
<li><em>format</em> argument controls the formatting of the time value</li>
</ul>
</li>
</ul>
<h4 id="conversion-specifiers-for-strftime">Conversion specifiers for <code>strftime</code></h4>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%a</code></td>
<td>abbreviated weekday name</td>
<td><code>Thu</code></td>
</tr>
<tr>
<td><code>%A</code></td>
<td>full weekday name</td>
<td><code>Thursday</code></td>
</tr>
<tr>
<td><code>%b</code></td>
<td>abbreviated month name</td>
<td><code>Jan</code></td>
</tr>
<tr>
<td><code>%B</code></td>
<td>full month name</td>
<td><code>January</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td>date and time</td>
<td><code>Thu Jan 19 21:24:52 2012</code></td>
</tr>
<tr>
<td><code>%C</code></td>
<td>year/100: [00–99]</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>%d</code></td>
<td>day of the month: [01–31]</td>
<td><code>19</code></td>
</tr>
<tr>
<td><code>%D</code></td>
<td>date [MM/DD/YY]</td>
<td><code>01/19/12</code></td>
</tr>
<tr>
<td><code>%e</code></td>
<td>day of month (single digit preceded by space) [1–31]</td>
<td><code>19</code></td>
</tr>
<tr>
<td><code>%F</code></td>
<td>ISO 8601 date format [YYYY–MM–DD]</td>
<td><code>2012-01-19</code></td>
</tr>
<tr>
<td><code>%g</code></td>
<td>last two digits of ISO 8601 week-based year [00–99]</td>
<td><code>12</code></td>
</tr>
<tr>
<td><code>%G</code></td>
<td>ISO 8601 week-based year</td>
<td><code>2012</code></td>
</tr>
<tr>
<td><code>%h</code></td>
<td>same as <code>%b</code></td>
<td><code>Jan</code></td>
</tr>
<tr>
<td><code>%H</code></td>
<td>hour of the day (24-hour format): [00–23]</td>
<td><code>21</code></td>
</tr>
<tr>
<td><code>%I</code></td>
<td>hour of the day (12-hour format): [01–12]</td>
<td><code>09</code></td>
</tr>
<tr>
<td><code>%j</code></td>
<td>day of the year: [001–366]</td>
<td><code>019</code></td>
</tr>
<tr>
<td><code>%m</code></td>
<td>month: [01–12]</td>
<td><code>01</code></td>
</tr>
<tr>
<td><code>%M</code></td>
<td>minute: [00–59]</td>
<td><code>24</code></td>
</tr>
<tr>
<td><code>%n</code></td>
<td>newline character</td>
<td></td>
</tr>
<tr>
<td><code>%p</code></td>
<td>AM/PM</td>
<td><code>PM</code></td>
</tr>
<tr>
<td><code>%r</code></td>
<td>locale’s time (12-hour format)</td>
<td><code>09:24:52 PM</code></td>
</tr>
<tr>
<td><code>%R</code></td>
<td>same as <code>%H:%M</code></td>
<td><code>21:24</code></td>
</tr>
<tr>
<td><code>%S</code></td>
<td>second: [00–60]</td>
<td><code>52</code></td>
</tr>
<tr>
<td><code>%t</code></td>
<td>horizontal tab character</td>
<td></td>
</tr>
<tr>
<td><code>%T</code></td>
<td>same as <code>%H:%M:%S</code></td>
<td><code>21:24:52</code></td>
</tr>
<tr>
<td><code>%u</code></td>
<td>ISO 8601 weekday [Monday = 1, 1–7]</td>
<td><code>4</code></td>
</tr>
<tr>
<td><code>%U</code></td>
<td>Sunday week number: [00–53]</td>
<td><code>03</code></td>
</tr>
<tr>
<td><code>%V</code></td>
<td>ISO 8601 week number: [01–53]</td>
<td><code>03</code></td>
</tr>
<tr>
<td><code>%w</code></td>
<td>weekday: [0 = Sunday, 0–6]</td>
<td><code>4</code></td>
</tr>
<tr>
<td><code>%W</code></td>
<td>Monday week number: [00–53]</td>
<td><code>03</code></td>
</tr>
<tr>
<td><code>%x</code></td>
<td>locale’s date 01/19/</td>
<td><code>12</code></td>
</tr>
<tr>
<td><code>%X</code></td>
<td>locale’s time 21:24:</td>
<td><code>52</code></td>
</tr>
<tr>
<td><code>%y</code></td>
<td>last two digits of year: [00–99]</td>
<td><code>12</code></td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>year</td>
<td><code>2012</code></td>
</tr>
<tr>
<td><code>%z</code></td>
<td>offset from UTC in ISO 8601 format</td>
<td><code>-0500</code></td>
</tr>
<tr>
<td><code>%Z</code></td>
<td>time zone name</td>
<td><code>EST</code></td>
</tr>
<tr>
<td><code>%%</code></td>
<td>translates to a percent sign</td>
<td><code>%</code></td>
</tr>
</tbody>
</table>
<ul>
<li><code>strftime</code> example: <a href="https://github.com/shichao-an/apue.3e/blob/master/datafiles/strftime.c">strftime.c</a></li>
</ul>
<h4 id="conversion-specifiers-for-strptime">Conversion specifiers for <code>strptime</code></h4>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%a</code></td>
<td>abbreviated or full weekday name</td>
</tr>
<tr>
<td><code>%A</code></td>
<td>same as <code>%a</code></td>
</tr>
<tr>
<td><code>%b</code></td>
<td>abbreviated or full month name</td>
</tr>
<tr>
<td><code>%B</code></td>
<td>same as <code>%b</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td>date and time</td>
</tr>
<tr>
<td><code>%C</code></td>
<td>all but the last two digits of the year</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>day of the month: [01–31]</td>
</tr>
<tr>
<td><code>%D</code></td>
<td>date [MM/DD/YY]</td>
</tr>
<tr>
<td><code>%e</code></td>
<td>same as <code>%d</code></td>
</tr>
<tr>
<td><code>%h</code></td>
<td>same as <code>%b</code></td>
</tr>
<tr>
<td><code>%H</code></td>
<td>hour of the day (24-hour format): [00–23]</td>
</tr>
<tr>
<td><code>%I</code></td>
<td>hour of the day (12-hour format): [01–12]</td>
</tr>
<tr>
<td><code>%j</code></td>
<td>day of the year: [001–366]</td>
</tr>
<tr>
<td><code>%m</code></td>
<td>month: [01–12]</td>
</tr>
<tr>
<td><code>%M</code></td>
<td>minute: [00–59]</td>
</tr>
<tr>
<td><code>%n</code></td>
<td>any white space</td>
</tr>
<tr>
<td><code>%p</code></td>
<td>AM/PM</td>
</tr>
<tr>
<td><code>%r</code></td>
<td>locale’s time (12-hour format, AM/PM notation)</td>
</tr>
<tr>
<td><code>%R</code></td>
<td>time as <code>%H:%M</code></td>
</tr>
<tr>
<td><code>%S</code></td>
<td>second: [00–60]</td>
</tr>
<tr>
<td><code>%t</code></td>
<td>any white space</td>
</tr>
<tr>
<td><code>%T</code></td>
<td>time as <code>%H:%M:%S</code></td>
</tr>
<tr>
<td><code>%U</code></td>
<td>Sunday week number: [00–53]</td>
</tr>
<tr>
<td><code>%w</code></td>
<td>weekday: [0 = Sunday, 0–6]</td>
</tr>
<tr>
<td><code>%W</code></td>
<td>Monday week number: [00–53]</td>
</tr>
<tr>
<td><code>%x</code></td>
<td>locale’s date</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>locale’s time</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>last two digits of year: [00–99]</td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>year</td>
</tr>
<tr>
<td><code>%%</code></td>
<td>translates to a percent sign</td>
</tr>
</tbody>
</table>
<p>Functions that are affected by <code>TZ</code> environment variable. If defined, the value of this environment variable is used by these functions instead of the default time zone:</p>
<ul>
<li><code>localtime</code></li>
<li><code>mktime</code></li>
<li><code>strftime</code></li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>